
<!DOCTYPE html>
<html>
<head>
    <title>ç™¾å®¶æ¨‚ç­–ç•¥æ¨¡æ“¬å™¨</title>
    <style>
        body { font-family: sans-serif; padding: 2em; max-width: 800px; margin: auto; }
        input, select { padding: 0.3em; margin-bottom: 1em; width: 100%; }
        button { padding: 0.5em 1em; }
        #result p { margin: 0.5em 0; }
    </style>
</head>
<body>
    <h1>ç™¾å®¶æ¨‚ç­–ç•¥æ¨¡æ“¬å™¨</h1>
    <form id="sim-form">
        <label>æ¨¡æ“¬å±€æ•¸</label><input type="number" name="rounds" value="50000" required>
        <label>åŸºæœ¬ä¸‹æ³¨é‡‘é¡</label><input type="number" name="base_bet" value="10" required>
        <label>åˆå§‹è³‡é‡‘</label><input type="number" name="initial_funds" value="1000" required>
        <label>åæ°´æ¯”ä¾‹ï¼ˆ0.005 = 0.5%ï¼‰</label><input type="number" name="rebate_rate" step="0.0001" value="0.005" required>
        <label>ä¸‹æ³¨ç­–ç•¥</label>
        <select name="strategy">
            <option value="fixed">å›ºå®š</option>
            <option value="martingale">é¦¬ä¸æ ¼çˆ¾</option>
        </select>
        <label>ä¸‹æ³¨å°è±¡</label>
        <select name="bet_target">
            <option value="Player">é–’</option>
            <option value="Banker">èŠ</option>
            <option value="Follow">è·Ÿæ³¨</option>
        </select>
        <button type="submit">é–‹å§‹æ¨¡æ“¬</button>
    </form>

    <div id="result"></div>
    <img id="chart" style="max-width:100%; margin-top:20px;" />

    <script>
        document.getElementById("sim-form").addEventListener("submit", async function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const res = await fetch("/simulate", { method: "POST", body: formData });
            const data = await res.json();
            const result = data.result;
            document.getElementById("result").innerHTML = `
                <p>èŠå®¶å‹ï¼š${result.Banker} æ¬¡</p>
                <p>é–’å®¶å‹ï¼š${result.Player} æ¬¡</p>
                <p>å’Œå±€ã€€ï¼š${result.Tie} æ¬¡</p>
                <p>å¯¦éš›ä¸‹æ³¨å±€æ•¸ï¼š${result.actual_bets}</p>
                <p>ç¸½æŠ¼æ³¨é‡‘é¡ï¼š$${result.total_bet.toFixed(2)}</p>
                <p>ç¸½æ´¾å½©é‡‘é¡ï¼š$${result.total_payout.toFixed(2)}</p>
                <p>ç¸½åæ°´é‡‘é¡ï¼š$${result.total_rebate.toFixed(2)}</p>
                <p>ğŸ¯ RTPï¼ˆä¸å«åæ°´ï¼‰ï¼š${result.rtp_base}</p>
                <p>ğŸ¯ RTPï¼ˆå«åæ°´ï¼‰ã€€ï¼š${result.rtp_total}</p>
                <p>æœ€çµ‚è³‡é‡‘ï¼š$${result.final_balance.toFixed(2)}</p>
            `;
            document.getElementById("chart").src = "data:image/png;base64," + data.chart;
        });
    </script>
</body>
</html>
